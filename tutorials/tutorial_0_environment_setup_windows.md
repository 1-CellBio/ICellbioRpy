# ğŸ¯ æ•™ç¨‹ç›®æ ‡

è¿™æ˜¯ä¸€ä¸ªä¸“é—¨ä¸º**å®Œå…¨é›¶åŸºç¡€çš„åˆå­¦è€…**å‡†å¤‡çš„Windowsç³»ç»Ÿç¯å¢ƒå®‰è£…æ•™ç¨‹ã€‚æˆ‘ä»¬å°†ä»æœ€åŸºç¡€çš„è½¯ä»¶ä¸‹è½½å¼€å§‹ï¼Œä¸€æ­¥ä¸€æ­¥åœ°æ­å»ºå®Œæ•´çš„ICellbioRpyä½¿ç”¨ç¯å¢ƒã€‚

**å®Œæˆæœ¬æ•™ç¨‹åï¼Œæ‚¨å°†æ‹¥æœ‰ï¼š**
- âœ… Rå’ŒRStudioå·¥ä½œç¯å¢ƒ
- âœ… Anaconda Pythonç¯å¢ƒ
- âœ… ä¸“ç”¨çš„condaç¯å¢ƒ
- âœ… ICellbioRpyåŒ…åŠå…¶ä¾èµ–
- âœ… å®Œå…¨é…ç½®å¥½çš„Python-Räº¤äº’ç¯å¢ƒ

**é¢„è®¡æ—¶é—´ï¼š** 1-2å°æ—¶ï¼ˆå–å†³äºç½‘ç»œé€Ÿåº¦ï¼‰

# ğŸ“‹ å¼€å§‹å‰çš„å‡†å¤‡

## æ£€æŸ¥æ‚¨çš„ç³»ç»Ÿ

1. **ç¡®è®¤æ‚¨ä½¿ç”¨çš„æ˜¯Windowsç³»ç»Ÿ**ï¼ˆæœ¬æ•™ç¨‹é€‚ç”¨äºWindows 10/11ï¼‰
2. **ç¡®ä¿æ‚¨æœ‰ç®¡ç†å‘˜æƒé™**ï¼ˆå®‰è£…è½¯ä»¶æ—¶å¯èƒ½éœ€è¦ï¼‰
3. **ç¡®ä¿ç½‘ç»œè¿æ¥ç¨³å®š**ï¼ˆéœ€è¦ä¸‹è½½è¾ƒå¤§çš„å®‰è£…æ–‡ä»¶ï¼‰
4. **å‡†å¤‡è‡³å°‘5GBçš„ç£ç›˜ç©ºé—´**

## æœ¬æ•™ç¨‹çš„ç‰¹ç‚¹

- ğŸ” **è¶…è¯¦ç»†æ­¥éª¤**ï¼šæ¯ä¸€æ­¥éƒ½æœ‰æˆªå›¾è¯´æ˜
- ğŸš¨ **é”™è¯¯é¢„é˜²**ï¼šæå‰è¯´æ˜å¯èƒ½é‡åˆ°çš„é—®é¢˜
- ğŸ’¡ **å°è´´å£«**ï¼šå®ç”¨çš„æ“ä½œå»ºè®®
- ğŸ”§ **æ•…éšœæ’é™¤**ï¼šå¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ³•

# ç¬¬ä¸€æ­¥ï¼šå®‰è£…Rè¯­è¨€

## 1.1 ä¸‹è½½R

1. **æ‰“å¼€æµè§ˆå™¨**ï¼ˆChromeã€Edgeã€Firefoxéƒ½å¯ä»¥ï¼‰

2. **è®¿é—®Rå®˜æ–¹ç½‘ç«™**ï¼š
   - åœ¨åœ°å€æ è¾“å…¥ï¼š`https://www.r-project.org/`
   - æŒ‰å›è½¦é”®

3. **è¿›å…¥ä¸‹è½½é¡µé¢**ï¼š
   - ç‚¹å‡»é¡µé¢ä¸Šçš„ **"CRAN"** é“¾æ¥
   - é€‰æ‹©ä¸€ä¸ªä¸­å›½çš„é•œåƒç«™ç‚¹ï¼ˆå»ºè®®é€‰æ‹©æ¸…åå¤§å­¦æˆ–ä¸­ç§‘é™¢çš„é•œåƒï¼‰

4. **é€‰æ‹©Windowsç‰ˆæœ¬**ï¼š
   - ç‚¹å‡» **"Download R for Windows"**
   - ç‚¹å‡» **"base"**
   - ç‚¹å‡» **"Download R 4.x.x for Windows"**ï¼ˆæ•°å­—å¯èƒ½ä¸åŒï¼Œé€‰æœ€æ–°ç‰ˆæœ¬ï¼‰

ğŸ’¡ **å°è´´å£«**ï¼šä¸‹è½½æ–‡ä»¶å¤§çº¦70-100MBï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚

## 1.2 å®‰è£…R

1. **æ‰¾åˆ°ä¸‹è½½çš„æ–‡ä»¶**ï¼š
   - é€šå¸¸åœ¨"ä¸‹è½½"æ–‡ä»¶å¤¹ä¸­
   - æ–‡ä»¶åç±»ä¼¼ï¼š`R-4.4.3-win.exe`

2. **å³é”®ç‚¹å‡»å®‰è£…æ–‡ä»¶**ï¼š
   - é€‰æ‹© **"ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ"**

3. **æŒ‰ç…§å®‰è£…å‘å¯¼æ“ä½œ**ï¼š
   - é€‰æ‹©è¯­è¨€ï¼š**ä¸­æ–‡ï¼ˆç®€ä½“ï¼‰** æˆ– **English**
   - ç‚¹å‡» **"ä¸‹ä¸€æ­¥"**
   - é˜…è¯»è®¸å¯åè®®ï¼Œç‚¹å‡» **"æˆ‘æ¥å—"**
   - é€‰æ‹©å®‰è£…ä½ç½®ï¼š**ä¿æŒé»˜è®¤** `C:\Program Files\R\R-4.x.x\`
   - é€‰æ‹©ç»„ä»¶ï¼š**ä¿æŒé»˜è®¤é€‰æ‹©**
   - å¯åŠ¨é€‰é¡¹ï¼š**ä¿æŒé»˜è®¤**
   - ç‚¹å‡» **"å®‰è£…"**

4. **ç­‰å¾…å®‰è£…å®Œæˆ**ï¼š
   - å®‰è£…è¿‡ç¨‹å¤§çº¦3-5åˆ†é’Ÿ
   - çœ‹åˆ°"å®‰è£…å®Œæˆ"æç¤ºï¼Œç‚¹å‡» **"å®Œæˆ"**

## 1.3 éªŒè¯Rå®‰è£…

1. **æŒ‰ `Win + R` é”®**æ‰“å¼€è¿è¡Œå¯¹è¯æ¡†

2. **è¾“å…¥ `cmd`** å¹¶æŒ‰å›è½¦ï¼Œæ‰“å¼€å‘½ä»¤æç¤ºç¬¦

3. **è¾“å…¥ä»¥ä¸‹å‘½ä»¤**ï¼š
   ```cmd
   R --version
   ```

4. **å¦‚æœçœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼Œè¯´æ˜å®‰è£…æˆåŠŸ**ï¼š
   ```
   R version 4.4.3 (2025-02-28) -- "Trophy Case"
   Copyright (C) 2025 The R Foundation for Statistical Computing
   ```

ğŸš¨ **å¦‚æœå‡ºç°é”™è¯¯**ï¼š"Rä¸æ˜¯å†…éƒ¨æˆ–å¤–éƒ¨å‘½ä»¤"ï¼Œè¯´æ˜Ræ²¡æœ‰æ·»åŠ åˆ°ç³»ç»Ÿè·¯å¾„ä¸­ã€‚è¯·å‚è€ƒæœ¬æ•™ç¨‹æœ«å°¾çš„æ•…éšœæ’é™¤éƒ¨åˆ†ã€‚

# ç¬¬äºŒæ­¥ï¼šå®‰è£…RStudio

## 2.1 ä¸‹è½½RStudio

1. **è®¿é—®RStudioå®˜ç½‘**ï¼š
   - åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ï¼š`https://rstudio.com/products/rstudio/download/`

2. **é€‰æ‹©å…è´¹ç‰ˆæœ¬**ï¼š
   - æ‰¾åˆ° **"RStudio Desktop"**
   - ç‚¹å‡» **"Download"** æŒ‰é’®

3. **ä¸‹è½½Windowsç‰ˆæœ¬**ï¼š
   - ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹æ‚¨çš„æ“ä½œç³»ç»Ÿ
   - ç‚¹å‡» **"Download RStudio Desktop for Windows"**

ğŸ’¡ **å°è´´å£«**ï¼šRStudioå®‰è£…æ–‡ä»¶çº¦200MBï¼Œæ¯”Rå¤§ä¸€äº›ã€‚

## 2.2 å®‰è£…RStudio

1. **è¿è¡Œå®‰è£…æ–‡ä»¶**ï¼š
   - æ‰¾åˆ°ä¸‹è½½çš„æ–‡ä»¶ï¼ˆç±»ä¼¼`RStudio-2024.xx.x-xxx.exe`ï¼‰
   - åŒå‡»è¿è¡Œï¼ˆå¦‚æœæç¤ºéœ€è¦ç®¡ç†å‘˜æƒé™ï¼Œé€‰æ‹©"æ˜¯"ï¼‰

2. **æŒ‰ç…§å‘å¯¼å®‰è£…**ï¼š
   - ç‚¹å‡» **"Next"**
   - é€‰æ‹©å®‰è£…ä½ç½®ï¼š**ä¿æŒé»˜è®¤**
   - ç‚¹å‡» **"Install"**
   - ç­‰å¾…å®‰è£…å®Œæˆï¼Œç‚¹å‡» **"Finish"**

## 2.3 é¦–æ¬¡å¯åŠ¨RStudio

1. **åœ¨æ¡Œé¢æˆ–å¼€å§‹èœå•æ‰¾åˆ°RStudioå›¾æ ‡**ï¼ŒåŒå‡»å¯åŠ¨

2. **RStudioç•Œé¢è¯´æ˜**ï¼š
   - **å·¦ä¸‹è§’**ï¼šConsoleï¼ˆæ§åˆ¶å°ï¼‰- åœ¨è¿™é‡Œè¿è¡ŒRä»£ç 
   - **å·¦ä¸Šè§’**ï¼šSourceï¼ˆæºä»£ç ç¼–è¾‘å™¨ï¼‰
   - **å³ä¸Šè§’**ï¼šEnvironmentï¼ˆç¯å¢ƒå˜é‡ï¼‰
   - **å³ä¸‹è§’**ï¼šFiles/Plots/Packagesï¼ˆæ–‡ä»¶/å›¾å½¢/åŒ…ç®¡ç†ï¼‰

3. **æµ‹è¯•RStudio**ï¼š
   - åœ¨Consoleä¸­è¾“å…¥ï¼š`1 + 1`
   - æŒ‰å›è½¦ï¼Œåº”è¯¥çœ‹åˆ°ç»“æœï¼š`[1] 2`

âœ… **å¦‚æœçœ‹åˆ°æ­£ç¡®ç»“æœï¼Œè¯´æ˜Rå’ŒRStudioéƒ½å®‰è£…æˆåŠŸäº†ï¼**

# ç¬¬ä¸‰æ­¥ï¼šå®‰è£…Anaconda

## 3.1 ä¸ºä»€ä¹ˆéœ€è¦Anacondaï¼Ÿ

Anacondaæ˜¯ä¸€ä¸ªPythonå‘è¡Œç‰ˆï¼Œå®ƒï¼š
- åŒ…å«Pythonè§£é‡Šå™¨
- åŒ…å«ç§‘å­¦è®¡ç®—å¸¸ç”¨çš„åº“
- æä¾›condaåŒ…ç®¡ç†å™¨
- å¯ä»¥åˆ›å»ºç‹¬ç«‹çš„è™šæ‹Ÿç¯å¢ƒ

## 3.2 ä¸‹è½½Anaconda

1. **è®¿é—®Anacondaå®˜ç½‘**ï¼š
   - åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ï¼š`https://www.anaconda.com/products/distribution`

2. **é€‰æ‹©Windowsç‰ˆæœ¬**ï¼š
   - ç‚¹å‡» **"Download"** æŒ‰é’®
   - é€‰æ‹© **"Windows"** æ ‡ç­¾
   - ä¸‹è½½ **64-Bit Graphical Installer**

ğŸ’¡ **å°è´´å£«**ï¼šAnacondaå®‰è£…æ–‡ä»¶å¾ˆå¤§ï¼ˆçº¦500MBï¼‰ï¼Œè¯·ç¡®ä¿ç½‘ç»œç¨³å®šã€‚

## 3.3 å®‰è£…Anaconda

1. **è¿è¡Œå®‰è£…æ–‡ä»¶**ï¼š
   - æ‰¾åˆ°ä¸‹è½½çš„æ–‡ä»¶ï¼ˆç±»ä¼¼`Anaconda3-2024.xx-Windows-x86_64.exe`ï¼‰
   - å³é”®é€‰æ‹© **"ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ"**

2. **å®‰è£…æ­¥éª¤**ï¼š
   - ç‚¹å‡» **"Next"**
   - ç‚¹å‡» **"I Agree"** æ¥å—è®¸å¯åè®®
   - é€‰æ‹© **"Just Me (recommended)"**
   - é€‰æ‹©å®‰è£…ä½ç½®ï¼š**å»ºè®®ä¿æŒé»˜è®¤** `C:\Users\YourName\anaconda3\`
   - **é‡è¦**ï¼šåœ¨"Advanced Options"é¡µé¢ï¼š
     - âœ… **å‹¾é€‰** "Add Anaconda3 to my PATH environment variable"
     - âœ… **å‹¾é€‰** "Register Anaconda3 as my default Python 3.x"
   - ç‚¹å‡» **"Install"**

3. **ç­‰å¾…å®‰è£…å®Œæˆ**ï¼š
   - å®‰è£…è¿‡ç¨‹å¯èƒ½éœ€è¦10-20åˆ†é’Ÿ
   - å®Œæˆåç‚¹å‡» **"Next"**ï¼Œç„¶åç‚¹å‡» **"Finish"**

## 3.4 éªŒè¯Anacondaå®‰è£…

1. **æ‰“å¼€Anaconda Prompt**ï¼š
   - æŒ‰ `Win` é”®ï¼Œæœç´¢ **"Anaconda Prompt"**
   - ç‚¹å‡»æ‰“å¼€

2. **æµ‹è¯•condaå‘½ä»¤**ï¼š
   ```bash
   conda --version
   ```
   åº”è¯¥çœ‹åˆ°ç±»ä¼¼ï¼š`conda 24.x.x`

3. **æµ‹è¯•Python**ï¼š
   ```bash
   python --version
   ```
   åº”è¯¥çœ‹åˆ°ç±»ä¼¼ï¼š`Python 3.11.x`

âœ… **å¦‚æœçœ‹åˆ°ç‰ˆæœ¬ä¿¡æ¯ï¼Œè¯´æ˜Anacondaå®‰è£…æˆåŠŸï¼**

# ç¬¬å››æ­¥ï¼šåˆ›å»ºä¸“ç”¨condaç¯å¢ƒ

## 4.1 ä¸ºä»€ä¹ˆéœ€è¦ä¸“ç”¨ç¯å¢ƒï¼Ÿ

åˆ›å»ºä¸“ç”¨ç¯å¢ƒçš„å¥½å¤„ï¼š
- é¿å…åŒ…å†²çª
- æ›´å¥½çš„ç‰ˆæœ¬ç®¡ç†
- å‡ºé—®é¢˜æ—¶å¯ä»¥é‡æ–°åˆ›å»º
- ä¸å½±å“ç³»ç»Ÿé»˜è®¤Python

## 4.2 åˆ›å»ºICellbioRpyä¸“ç”¨ç¯å¢ƒ

1. **æ‰“å¼€Anaconda Prompt**ï¼ˆå¦‚æœè¿˜æ²¡æ‰“å¼€çš„è¯ï¼‰

2. **åˆ›å»ºæ–°ç¯å¢ƒ**ï¼š
   ```bash
   conda create -n 1cellbio python=3.11
   ```
   - `-n 1cellbio`ï¼šç¯å¢ƒåç§°ä¸º"1cellbio"
   - `python=3.11`ï¼šæŒ‡å®šPythonç‰ˆæœ¬

3. **ç¡®è®¤åˆ›å»º**ï¼š
   - å½“æç¤º "Proceed ([y]/n)?" æ—¶ï¼Œè¾“å…¥ `y` å¹¶æŒ‰å›è½¦
   - ç­‰å¾…ç¯å¢ƒåˆ›å»ºå®Œæˆ

4. **æ¿€æ´»ç¯å¢ƒ**ï¼š
   ```bash
   conda activate 1cellbio
   ```

5. **éªŒè¯ç¯å¢ƒ**ï¼š
   - å‘½ä»¤æç¤ºç¬¦åº”è¯¥å˜æˆï¼š`(1cellbio) C:\Users\YourName>`
   - è¿™è¡¨ç¤ºæ‚¨ç°åœ¨åœ¨icellbioç¯å¢ƒä¸­

## 4.3 åœ¨æ–°ç¯å¢ƒä¸­å®‰è£…anndata

1. **ç¡®ä¿åœ¨icellbioç¯å¢ƒä¸­**ï¼ˆå‘½ä»¤æç¤ºç¬¦å‰æœ‰`(1cellbio)`ï¼‰

2. **å®‰è£…anndata**ï¼š
   ```bash
   conda install -c conda-forge anndata
   ```

3. **ç¡®è®¤å®‰è£…**ï¼š
   - å½“æç¤ºæ—¶è¾“å…¥ `y`
   - ç­‰å¾…å®‰è£…å®Œæˆ

4. **éªŒè¯anndataå®‰è£…**ï¼š
   ```bash
   python -c "import anndata; print('anndata version:', anndata.__version__)"
   ```
   åº”è¯¥çœ‹åˆ°ï¼š`anndata version: 0.11.x`

âœ… **å¦‚æœçœ‹åˆ°ç‰ˆæœ¬ä¿¡æ¯ï¼Œè¯´æ˜condaç¯å¢ƒå’Œanndataéƒ½å®‰è£…æˆåŠŸï¼**

# ç¬¬äº”æ­¥ï¼šå®‰è£…RåŒ…å’Œä¾èµ–

## 5.1 åœ¨RStudioä¸­å®‰è£…åŸºç¡€RåŒ…

1. **æ‰“å¼€RStudio**

2. **å®‰è£…åŸºç¡€åŒ…**ï¼š
   åœ¨Consoleä¸­é€è¡Œè¿è¡Œä»¥ä¸‹ä»£ç ï¼š
   ```r
   # å®‰è£…åŸºç¡€åŒ…
   install.packages(c("devtools", "reticulate", "Matrix", "data.table"))
   ```

3. **ç­‰å¾…å®‰è£…å®Œæˆ**ï¼š
   - è¿™å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿ
   - å¦‚æœæç¤ºé€‰æ‹©é•œåƒï¼Œé€‰æ‹©ä¸­å›½çš„é•œåƒ

4. **å®‰è£…Bioconductorç›¸å…³åŒ…**ï¼š
   ```r
   # å®‰è£…BiocManager
   if (!requireNamespace("BiocManager", quietly = TRUE))
       install.packages("BiocManager")
   
   # å®‰è£…ç”Ÿç‰©ä¿¡æ¯å­¦ç›¸å…³åŒ…
   BiocManager::install(c("SingleCellExperiment", "SummarizedExperiment", "S4Vectors"))
   ```

## 5.2 å®‰è£…ICellbioRpyåŒ…

**æ³¨æ„**ï¼šè¿™é‡Œæˆ‘ä»¬å‡è®¾ICellbioRpyåŒ…å·²ç»å‘å¸ƒåˆ°GitHubã€‚å¦‚æœè¿˜æ²¡æœ‰ï¼Œè¯·è·³åˆ°ç¬¬å…­æ­¥å…ˆé…ç½®Pythonç¯å¢ƒã€‚

```r
# ä»GitHubå®‰è£…ICellbioRpyåŒ…
devtools::install_github("your_username/ICellbioRpy")
```

å¦‚æœé‡åˆ°ç½‘ç»œé—®é¢˜ï¼Œå¯ä»¥å°è¯•ï¼š
```r
# è®¾ç½®ä»£ç†ï¼ˆå¦‚æœéœ€è¦ï¼‰
# options(download.file.method = "wininet")

# æˆ–è€…ä»æœ¬åœ°å®‰è£…ï¼ˆå¦‚æœæ‚¨æœ‰æºç åŒ…ï¼‰
# devtools::install_local("path/to/ICellbioRpy")
```

# ç¬¬å…­æ­¥ï¼šé…ç½®Python-Räº¤äº’ç¯å¢ƒ

## 6.1 åœ¨RStudioä¸­é…ç½®reticulate

1. **åŠ è½½reticulateåŒ…**ï¼š
   ```r
   library(reticulate)
   ```

2. **æŸ¥çœ‹å¯ç”¨çš„condaç¯å¢ƒ**ï¼š
   ```r
   conda_list()
   ```
   æ‚¨åº”è¯¥èƒ½çœ‹åˆ°åˆšæ‰åˆ›å»ºçš„"1cellbio"ç¯å¢ƒ

3. **æŒ‡å®šä½¿ç”¨icellbioç¯å¢ƒ**ï¼š
   ```r
   use_condaenv("1cellbio", required = TRUE)
   ```

4. **éªŒè¯Pythoné…ç½®**ï¼š
   ```r
   py_config()
   ```
   æ£€æŸ¥è¾“å‡ºä¸­çš„Pythonè·¯å¾„æ˜¯å¦æŒ‡å‘icellbioç¯å¢ƒ

## 6.2 æµ‹è¯•ICellbioRpyçš„Pythonç¯å¢ƒé…ç½®

1. **åŠ è½½ICellbioRpyåŒ…**ï¼š
   ```r
   library(ICellbioRpy)
   ```

2. **é…ç½®Pythonç¯å¢ƒ**ï¼š
   ```r
   configure_python_env(conda_env = "1cellbio", verbose = TRUE)
   ```

3. **æ£€æŸ¥anndataå¯ç”¨æ€§**ï¼š
   ```r
   check_anndata_available()
   ```

âœ… **å¦‚æœçœ‹åˆ° "âœ“ anndata is available (version: X.X.X)"ï¼Œè¯´æ˜é…ç½®æˆåŠŸï¼**

# ç¬¬ä¸ƒæ­¥ï¼šå®Œæ•´åŠŸèƒ½æµ‹è¯•

## 7.1 è¿è¡Œæµ‹è¯•è„šæœ¬

åœ¨RStudioä¸­è¿è¡Œä»¥ä¸‹æµ‹è¯•ä»£ç ï¼š

```r
# æµ‹è¯•è„šæœ¬
cat("=== ICellbioRpy å®Œæ•´åŠŸèƒ½æµ‹è¯• ===\n")

# 1. åŠ è½½åŒ…
library(ICellbioRpy)
cat("âœ“ ICellbioRpyåŒ…åŠ è½½æˆåŠŸ\n")

# 2. é…ç½®Pythonç¯å¢ƒ
configure_python_env(conda_env = "1cellbio", verbose = TRUE)
cat("âœ“ Pythonç¯å¢ƒé…ç½®æˆåŠŸ\n")

# 3. æ£€æŸ¥anndata
check_anndata_available()
cat("âœ“ anndataæ£€æŸ¥é€šè¿‡\n")

# 4. æ£€æŸ¥ä¸»è¦å‡½æ•°
functions_to_check <- c("read1Cellbio", "iCellbio2H5ad", "seurat_to_h5ad", "read_10x_mtx_to_h5ad")
for (func in functions_to_check) {
  if (exists(func)) {
    cat("âœ“", func, "å‡½æ•°å¯ç”¨\n")
  } else {
    cat("âœ—", func, "å‡½æ•°ä¸å¯ç”¨\n")
  }
}

cat("\n=== æµ‹è¯•å®Œæˆ ===\n")
cat("å¦‚æœæ‰€æœ‰é¡¹ç›®éƒ½æ˜¾ç¤º âœ“ï¼Œè¯´æ˜ç¯å¢ƒé…ç½®å®Œå…¨æˆåŠŸï¼\n")
```

## 7.2 åˆ›å»ºç®€å•ç¤ºä¾‹

æµ‹è¯•ä¸€ä¸ªç®€å•çš„Python-Räº¤äº’ï¼š

```r
# ç®€å•çš„Python-Räº¤äº’æµ‹è¯•
library(reticulate)

# åœ¨Pythonä¸­åˆ›å»ºæ•°æ®
py_run_string("
import numpy as np
import pandas as pd
test_data = np.random.rand(5, 3)
df = pd.DataFrame(test_data, columns=['A', 'B', 'C'])
")

# åœ¨Rä¸­è®¿é—®Pythonæ•°æ®
py_df <- py$df
print(py_df)

cat("âœ“ Python-Ræ•°æ®äº¤äº’æµ‹è¯•æˆåŠŸï¼\n")
```

# ğŸ”§ å¸¸è§é—®é¢˜æ’æŸ¥

## é—®é¢˜1ï¼šRå‘½ä»¤ä¸è¢«è¯†åˆ«

**ç—‡çŠ¶**ï¼šåœ¨å‘½ä»¤æç¤ºç¬¦ä¸­è¾“å…¥`R --version`æ—¶æç¤º"Rä¸æ˜¯å†…éƒ¨æˆ–å¤–éƒ¨å‘½ä»¤"

**è§£å†³æ–¹æ³•**ï¼š
1. æŒ‰ `Win + X`ï¼Œé€‰æ‹©"ç³»ç»Ÿ"
2. ç‚¹å‡»"é«˜çº§ç³»ç»Ÿè®¾ç½®"
3. ç‚¹å‡»"ç¯å¢ƒå˜é‡"
4. åœ¨"ç³»ç»Ÿå˜é‡"ä¸­æ‰¾åˆ°"Path"ï¼Œç‚¹å‡»"ç¼–è¾‘"
5. ç‚¹å‡»"æ–°å»º"ï¼Œæ·»åŠ Rçš„å®‰è£…è·¯å¾„ï¼ˆé€šå¸¸æ˜¯`C:\Program Files\R\R-4.x.x\bin`ï¼‰
6. ç‚¹å‡»"ç¡®å®š"ä¿å­˜
7. é‡æ–°æ‰“å¼€å‘½ä»¤æç¤ºç¬¦æµ‹è¯•

## é—®é¢˜2ï¼šAnacondaå®‰è£…åcondaå‘½ä»¤æ— æ•ˆ

**ç—‡çŠ¶**ï¼šåœ¨å‘½ä»¤æç¤ºç¬¦ä¸­è¾“å…¥`conda --version`æç¤ºå‘½ä»¤ä¸å­˜åœ¨

**è§£å†³æ–¹æ³•**ï¼š
1. é‡æ–°è¿è¡ŒAnacondaå®‰è£…ç¨‹åº
2. ç¡®ä¿å‹¾é€‰"Add Anaconda3 to my PATH environment variable"
3. æˆ–è€…æ‰‹åŠ¨æ·»åŠ condaè·¯å¾„åˆ°ç¯å¢ƒå˜é‡ï¼š
   - æ·»åŠ ï¼š`C:\Users\YourName\anaconda3\Scripts`
   - æ·»åŠ ï¼š`C:\Users\YourName\anaconda3\Library\bin`

## é—®é¢˜3ï¼šreticulateæ‰¾ä¸åˆ°condaç¯å¢ƒ

**ç—‡çŠ¶**ï¼š`conda_list()`è¿”å›ç©ºç»“æœæˆ–æ‰¾ä¸åˆ°icellbioç¯å¢ƒ

**è§£å†³æ–¹æ³•**ï¼š
```r
# æ‰‹åŠ¨æŒ‡å®šcondaè·¯å¾„
Sys.setenv(RETICULATE_CONDA = "C:/Users/YourName/anaconda3/Scripts/conda.exe")

# é‡æ–°æ£€æŸ¥
conda_list()

# æˆ–è€…ç›´æ¥æŒ‡å®šPythonè·¯å¾„
use_python("C:/Users/YourName/anaconda3/envs/1cellbio/python.exe")
```

## é—®é¢˜4ï¼šanndataå¯¼å…¥å¤±è´¥

**ç—‡çŠ¶**ï¼šPythonå¯ä»¥å¯¼å…¥anndataä½†Rä¸­æŠ¥é”™

**è§£å†³æ–¹æ³•**ï¼š
```r
# å¼ºåˆ¶é‡æ–°é…ç½®Pythonç¯å¢ƒ
library(reticulate)
use_condaenv("1cellbio", required = TRUE)

# æ‰‹åŠ¨æµ‹è¯•Pythonå¯¼å…¥
py_run_string("import anndata; print(anndata.__version__)")

# å¦‚æœè¿˜æ˜¯å¤±è´¥ï¼Œé‡æ–°å®‰è£…anndata
system("conda activate 1cellbio && conda install -c conda-forge anndata")
```

## é—®é¢˜5ï¼šç½‘ç»œè¿æ¥é—®é¢˜

**ç—‡çŠ¶**ï¼šä¸‹è½½é€Ÿåº¦æ…¢æˆ–è¿æ¥å¤±è´¥

**è§£å†³æ–¹æ³•**ï¼š
1. **ä½¿ç”¨å›½å†…é•œåƒ**ï¼š
   ```bash
   # é…ç½®condaä½¿ç”¨æ¸…åé•œåƒ
   conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/
   conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
   conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/
   ```

2. **åœ¨Rä¸­è®¾ç½®é•œåƒ**ï¼š
   ```r
   # è®¾ç½®CRANé•œåƒ
   options(repos = c(CRAN = "https://mirrors.tuna.tsinghua.edu.cn/CRAN/"))
   ```

# ğŸ’¡ æˆåŠŸæ ‡å¿—

å½“æ‚¨å®Œæˆæ‰€æœ‰æ­¥éª¤åï¼Œåº”è¯¥èƒ½å¤Ÿï¼š

1. âœ… **åœ¨RStudioä¸­è¿è¡Œ**ï¼š`library(ICellbioRpy)`
2. âœ… **æˆåŠŸé…ç½®Pythonç¯å¢ƒ**ï¼š`configure_python_env(conda_env = "1cellbio")`
3. âœ… **éªŒè¯anndataå¯ç”¨**ï¼š`check_anndata_available()`
4. âœ… **æŸ¥çœ‹æ‰€æœ‰å‡½æ•°**ï¼š`ls("package:ICellbioRpy")`

# ğŸ‰ æ­å–œï¼

å¦‚æœæ‚¨å®Œæˆäº†æ‰€æœ‰æ­¥éª¤ï¼Œæ­å–œæ‚¨å·²ç»æˆåŠŸæ­å»ºäº†å®Œæ•´çš„ICellbioRpyä½¿ç”¨ç¯å¢ƒï¼

## ä¸‹ä¸€æ­¥

ç°åœ¨æ‚¨å¯ä»¥ï¼š
1. å­¦ä¹ [æ•™ç¨‹1ï¼š1CellBioè½¬H5AD](tutorial_1_1cellbio_to_h5ad.md)
2. å­¦ä¹ [æ•™ç¨‹2ï¼š1CellBioè½¬Seurat](tutorial_2_1cellbio_to_seurat.md)
3. æ ¹æ®æ‚¨çš„æ•°æ®ç±»å‹é€‰æ‹©åˆé€‚çš„æ•™ç¨‹

## ä¿å­˜æ‚¨çš„ç¯å¢ƒé…ç½®

å»ºè®®åœ¨RStudioä¸­åˆ›å»ºä¸€ä¸ªå¯åŠ¨è„šæœ¬ï¼š

```r
# ä¿å­˜ä¸º setup_environment.R
library(ICellbioRpy)
configure_python_env(conda_env = "1cellbio", verbose = FALSE)

cat("âœ“ ICellbioRpyç¯å¢ƒå·²å°±ç»ªï¼\n")
cat("Pythonç¯å¢ƒï¼š1cellbio\n")
cat("å¯ç”¨å‡½æ•°ï¼š", paste(ls("package:ICellbioRpy"), collapse = ", "), "\n")
```

æ¯æ¬¡ä½¿ç”¨ICellbioRpyæ—¶ï¼Œåªéœ€è¿è¡Œï¼š`source("setup_environment.R")`

---

**éœ€è¦å¸®åŠ©ï¼Ÿ**
- æŸ¥çœ‹å…¶ä»–æ•™ç¨‹è·å–ä½¿ç”¨æŒ‡å¯¼
- è®¿é—®GitHubé¡¹ç›®é¡µé¢å¯»æ±‚æ”¯æŒ
- åŠ å…¥ç”¨æˆ·äº¤æµç¾¤è·å–å¸®åŠ©

**ç¥æ‚¨å•ç»†èƒæ•°æ®åˆ†æé¡ºåˆ©ï¼** ğŸ§¬âœ¨