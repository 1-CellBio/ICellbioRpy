% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/read_gef.R
\name{stereo_to_h5ad}
\alias{stereo_to_h5ad}
\title{Convert StereoData to H5AD format}
\usage{
stereo_to_h5ad(
  object,
  output_file,
  layer = c("counts", "data"),
  include_spatial = TRUE,
  overwrite = FALSE,
  name_conflict = c("make_unique", "error"),
  verbose = TRUE
)
}
\arguments{
\item{object}{A StereoData object from read_gef()}

\item{output_file}{Output H5AD file path}

\item{layer}{Which layer to use as main X matrix ("counts" or "data")}

\item{include_spatial}{Whether to include spatial coordinates (default TRUE)}

\item{overwrite}{Logical, whether to overwrite existing file (default FALSE)}

\item{name_conflict}{Strategy for handling duplicate names ("make_unique" or "error")}

\item{verbose}{Whether to print progress messages (default TRUE)}
}
\value{
Invisibly returns the output file path
}
\description{
This function converts a StereoData object (from read_gef) to an H5AD file,
which can be used in Python with scanpy and other tools. Cell borders are
stored in the uns section of the AnnData object.
}
\details{
The function automatically configures a suitable Python environment with
anndata support. The resulting H5AD file contains:
\itemize{
\item Expression matrix in adata.X (scipy sparse format)
\item Cell metadata in adata.obs
\item Gene metadata in adata.var
\item Spatial coordinates in adata.obsm\link{'spatial'} (if include_spatial = TRUE)
\item Cell borders in adata.uns\link{'cell_borders'} as optimized deck.gl format (if available):
\itemize{
\item vertices: all vertices as (n_total_vertices, 2) matrix [\link{x,y}, \link{x,y}, ...]
\item polygon_starts: starting index for each polygon in vertices array
\item polygon_lengths: number of vertices per polygon
}
\item Conversion metadata in adata.uns\link{'stereo_metadata'}
}
}
\examples{
\dontrun{
# Read GEF file
stereo_data <- read_gef("sample.cellbin.gef")

# Convert to H5AD
stereo_to_h5ad(stereo_data, "output.h5ad")

# With custom settings
stereo_to_h5ad(stereo_data, "output.h5ad", 
               layer = "counts", 
               overwrite = TRUE)
}

}
